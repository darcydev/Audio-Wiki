const synth=window.speechSynthesis,textInput=document.querySelector("#textarea"),voiceSelect=document.querySelector("#voice-select"),icon=document.querySelector("#icon"),startSpeak=document.querySelector("#start-speak"),pauseSpeak=document.querySelector("#pause-speak"),stopSpeak=document.querySelector("#stop-speak"),isFirefox="undefined"!=typeof InstallTrigger,isChrome=!!window.chrome&&!!window.chrome.webstore;let voices=[];const getVoices=()=>{(voices=synth.getVoices()).forEach(voice=>{const option=document.createElement("option");option.textContent=`${voice.name}(${voice.lang})`,option.setAttribute("data-lang",voice.lang),option.setAttribute("data-name",voice.name),voiceSelect.appendChild(option)})};getVoices(),void 0!==synth.onvoiceschanged&&(synth.onvoiceschanged=getVoices);const speak=()=>{if(stop(),""!==textInput.value){const speakText=new SpeechSynthesisUtterance(textInput.value);speakText.onend=e=>{displayButton("stop")},speakText.onerror=e=>{console.error("Oops, there's been an error!")};const selectedVoice=voiceSelect.selectedOptions[0].getAttribute("data-name");voices.forEach(voice=>{voice.name===selectedVoice&&(speakText.voice=voice)}),synth.speak(speakText)}},pause=()=>{synth.speaking&&synth.pause()},stop=()=>{synth.speaking&&synth.cancel()};function displayButton(btnClicked){startSpeak.style.display="block",pauseSpeak.style.display="block",stopSpeak.style.display="block","start"===btnClicked&&(startSpeak.style.display="none"),"pause"===btnClicked&&(pauseSpeak.style.display="none"),"stop"===btnClicked&&(pauseSpeak.style.display="none",stopSpeak.style.display="none"),icon.classList.toggle("pulse")}startSpeak.addEventListener("click",e=>{e.preventDefault(),speak(),textInput.blur(),displayButton("start")}),pauseSpeak.addEventListener("click",e=>{e.preventDefault(),pause(),displayButton("pause")}),stopSpeak.addEventListener("click",e=>{e.preventDefault(),stop(),displayButton("stop")}),displayButton();
//# sourceMappingURL=speakText.js.map